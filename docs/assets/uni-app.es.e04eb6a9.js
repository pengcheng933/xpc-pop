import{q as e,l,s as a,o as t,c as o,w as s,a as n,u,v as i,x as d,y as c,z as r,i as v,d as p,e as m,t as h,j as y,f as g,A as k,I as f,h as w,P as _,B as x,F as S,C as b}from"./index-3871ad41.js";import{_ as T}from"./_plugin-vue_export-helper.1b428a4d.js";const C=T({__name:"drawer",props:{type:{type:String,default:"center"},transition:{type:String,default:"fade"},backgroundColor:{type:String,default:"transparent"},maskShow:{type:Boolean,default:!0},mask:{type:Boolean,default:!0}},emits:["emitMaskClick"],setup(p,{expose:m,emit:h}){const y=p,{type:g,transition:k,backgroundColor:f,maskShow:w,mask:_}=e(y),x=l(!0),S=l(!1),b=a((()=>{let e="";S.value&&(e+="lu-popup-active");return-1!==["left","right","top","bottom","center"].indexOf(g.value)&&(e+=" lu-popup-"+g.value),e})),T=a((()=>{let e={};return _.value||(e.pointerEvents="none"),e})),C=a((()=>{let e="";return x.value&&"none"!==k.value&&(e+="lu-popup-transition-"+k.value),e})),M=a((()=>{let e="";return x.value&&(e+="lu-popup-mask-fade"),e})),A=()=>{h("emitMaskClick")};return m({show:()=>{x.value=!0,S.value=!0,setTimeout((()=>{x.value=!1}),50)},close:()=>{x.value=!0,setTimeout((()=>{S.value=!1}),300)}}),(e,l)=>{const a=v;return t(),o(a,{class:u(["lu-popup-wrapper",i(b)]),style:d(i(T))},{default:s((()=>[n(a,{class:u(["lu-popup-content",i(C)]),style:d([{backgroundColor:i(f)}])},{default:s((()=>[c(e.$slots,"default",{},void 0,!0)])),_:3},8,["class","style"]),i(w)?(t(),o(a,{key:0,class:u(["lu-popup-mask",i(M)]),onClick:A},null,8,["class"])):r("",!0)])),_:3},8,["class","style"])}}},[["__scopeId","data-v-1d3c3c45"]]),M=T({__name:"loadingAndToast",setup(e,{expose:c}){const v=l({}),k=l(),f=a((()=>v.value.isLoading?"none":v.value.transition||"fade")),w=a((()=>({color:v.value.titleColor,fontSize:v.value.titleFontSize,lineHeight:v.value.titleLineHeight}))),_=a((()=>({width:v.value.width,height:v.value.height,borderRadius:v.value.borderRadius}))),x=a((()=>v.value.imageUrl||"/static/loading.png"));a((()=>({width:v.value.imageWidth,height:v.value.imageHeight})));const S=a((()=>v.value.maskShow));return c({show:e=>{v.value=e,0!==Number(e.duration)&&setTimeout((()=>{y().globalData.popClose({type:"loadingAndToast"})}),e.duration),k.value.show()},close:()=>{k.value.close()}}),(e,l)=>{const a=g;return t(),o(C,{ref_key:"drawer",ref:k,transition:i(f),maskShow:i(S),mask:!1},{default:s((()=>[p("div",{class:u(["box",{loadingBox:v.value.isLoading,noTitleBox:!v.value.title}]),style:d(i(_))},[v.value.isLoading?(t(),m("div",{key:0,class:"loading"},[n(a,{class:"image",src:i(x)},null,8,["src"])])):r("",!0),v.value.title?(t(),m("div",{key:1,class:"title",style:d(i(w))},h(v.value.title),5)):r("",!0)],6)])),_:1},8,["transition","maskShow"])}}},[["__scopeId","data-v-ce888002"]]),A=T({__name:"modalPop",setup(e,{expose:c}){const v=l({}),g=l(""),w=a((()=>v.value.boxStyle||{})),_=a((()=>v.value.cancelStyle||{})),x=a((()=>v.value.confirmStyle||{})),S=a((()=>v.value.titleStyle||{})),b=a((()=>v.value.contentStyle||{})),T=a((()=>v.value.inputStyle||{})),M=a((()=>v.value.buttonStyle||{})),A=a((()=>v.value.transition||"fade")),B=a((()=>v.value.maskShow)),I=e=>{const l=e.detail.node.attrs.id;l&&v.value.contentHandler[l]&&v.value.contentHandler[l]()},P=e=>{const l={confirm:!1,cancel:!1,content:""};l[e]=!0,v.value.editable&&(l.content=g.value),H(l),v.value.success&&v.value.success(l)},H=e=>{y().globalData.popClose({type:"modalPop",id:v.value.id,result:e}),g.value=""},L=l(),j=()=>{v.value.clickMask&&L.value.close()};return c({show:e=>{console.log(e,">>"),v.value=e,L.value.show()},close:()=>{L.value.close()}}),(e,l)=>{const a=k,c=f;return t(),o(C,{ref_key:"drawer",ref:L,transition:i(A),maskShow:i(B),onEmitMaskClick:j},{default:s((()=>[p("div",{class:u(["box",{noTitleTop:!v.value.title}]),style:d(i(w))},[p("div",{class:"title",style:d(i(S))},h(v.value.title),5),v.value.editable?(t(),m("div",{key:1,class:"inputBox"},[n(c,{class:"input",style:d(i(T)),placeholder:v.value.placeholderText,modelValue:g.value,"onUpdate:modelValue":l[0]||(l[0]=e=>g.value=e)},null,8,["style","placeholder","modelValue"])])):(t(),m("div",{key:0,class:"content",style:d(i(b))},[n(a,{nodes:v.value.content+"  ",class:"span",onItemclick:I},null,8,["nodes"])],4)),p("div",{class:u(["buttonBox",{buttonBoxCenter:!v.value.showCancel}]),style:d(i(M))},[v.value.showCancel?(t(),m("div",{key:0,class:"left buttonItem",onClick:l[1]||(l[1]=e=>P("cancel")),style:d(i(_))},h(v.value.cancelText),5)):r("",!0),p("div",{class:"right buttonItem",onClick:l[2]||(l[2]=e=>P("confirm")),style:d(i(x))},h(v.value.confirmText),5)],6)],6)])),_:1},8,["transition","maskShow"])}}},[["__scopeId","data-v-71b3c43e"]]),B={__name:"xpc-pop",setup(e,{expose:a}){const o=l(null),s=l(null),u=String((new Date).getTime())+Math.floor(1e3*Math.random());w((()=>{_.addMethods("loadingAndToast",{id:u,show:o.value.show,close:o.value.close}),_.addMethods("modalPop",{id:u,show:s.value.show,close:s.value.close})})),x((()=>{_.delMethods("loadingAndToast",{id:u}),_.delMethods("modalPop",{id:u})}));return a({id:u,show:e=>{"loadingAndToast"===e.type?o.value.show(e):s.value.show(e)},close:e=>{"loadingAndToast"===e.type?o.value.close(e):s.value.close(e)}}),(e,l)=>(t(),m(S,null,[n(M,{ref_key:"loadingAndToast",ref:o},null,512),n(A,{ref_key:"modalPop",ref:s},null,512)],64))}};function I(e,l){return b(e)?l:e}export{B as _,I as r};
